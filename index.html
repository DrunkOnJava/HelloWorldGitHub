<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PED Knowledge Base</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="bg-gray-50">
    <!-- Include components -->
    <div id="navigation"></div>
    <div id="hero"></div>
    <div id="categories"></div>
    <div id="quick-access"></div>
    <div id="footer"></div>

    <!-- Load components -->
    <script>
      // Get base URL for GitHub Pages or local development
      const getBaseUrl = () => {
        const isGitHubPages = window.location.hostname.includes("github.io");
        return isGitHubPages ? "/HelloWorldGitHub/" : "/";
      };

      // Function to load HTML components
      async function loadComponent(id, path) {
        try {
          const baseUrl = getBaseUrl();
          const response = await fetch(baseUrl + path);
          const html = await response.text();
          document.getElementById(id).innerHTML = html;
        } catch (error) {
          console.error(`Error loading ${path}:`, error);
        }
      }

      // Load all components
      document.addEventListener("DOMContentLoaded", () => {
        loadComponent("navigation", "components/navigation.html");
        loadComponent("hero", "components/hero.html");
        loadComponent("categories", "components/categories.html");
        loadComponent("quick-access", "components/quick-access.html");
        loadComponent("footer", "components/footer.html");

        // Update all relative links to include base URL
        document.addEventListener("click", (e) => {
          const link = e.target.closest("a");
          if (link && link.href.startsWith(window.location.origin)) {
            const baseUrl = getBaseUrl();
            const path = link.getAttribute("href");
            if (!path.startsWith(baseUrl)) {
              e.preventDefault();
              window.location.href = baseUrl + path;
            }
          }
        });
      });
    </script>
  </body>
</html>
