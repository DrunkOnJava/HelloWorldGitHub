<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PED Knowledge Base</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body class="bg-gray-50">
    <!-- Include components -->
    <div id="navigation"></div>
    <div id="hero"></div>
    <div id="categories"></div>
    <div id="quick-access"></div>
    <div id="footer"></div>

    <!-- Base URL handling -->
    <script>
      window.getBaseUrl = () => {
        const isGitHubPages = window.location.hostname.includes("github.io");
        return isGitHubPages ? "/HelloWorldGitHub/" : "/";
      };

      // Update href attributes with base URL
      function updateLinks() {
        document.querySelectorAll("[data-href]").forEach((element) => {
          const path = element.getAttribute("data-href");
          element.href = window.getBaseUrl() + path;
        });
      }
    </script>

    <!-- Load components -->
    <script>
      // Function to load HTML components
      async function loadComponent(id, path) {
        try {
          const baseUrl = getBaseUrl();
          const response = await fetch(baseUrl + path);
          const html = await response.text();
          document.getElementById(id).innerHTML = html;
        } catch (error) {
          console.error(`Error loading ${path}:`, error);
        }
      }

      // Load all components and update links
      document.addEventListener("DOMContentLoaded", () => {
        Promise.all([
          loadComponent("navigation", "components/navigation.html"),
          loadComponent("hero", "pages/home/hero.html"),
          loadComponent("categories", "pages/home/categories.html"),
          loadComponent("quick-access", "pages/home/quick-access.html"),
          loadComponent("footer", "components/footer.html"),
        ]).then(() => {
          updateLinks();
        });
      });
    </script>
  </body>
</html>
